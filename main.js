"use strict";!function(){function a(a){var e=window.location.href.split("#")[0],i="https://accounts.spotify.com/authorize?response_type=token&client_id=e1e537d4eb8c485c9f34843a0e2cb2b6&redirect_uri="+encodeURIComponent(e)+"&state="+a;throw window.location.replace(i),"assert failed, redirect error"}function e(a){for(var e,i=/([^&=#;]+)=([^&#;]+)/g,n={};null!==(e=i.exec(a));)n[e[1]]=decodeURIComponent(e[2]);return n}function i(a,e){var i=1e3*e;if(i>h){var n=Date.now()+i;window.localStorage.setItem(d,a),window.localStorage.setItem(c,n.toString())}else window.localStorage.removeItem(d),window.localStorage.removeItem(c)}function n(){var a=window.localStorage.getItem(c)||"0",e=parseInt(a,10);if(!isNaN(e)&&e>Date.now()+h){var i=window.localStorage.getItem(d);if(i)return i}}function t(a){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i="",n=0;n<a;n++)i+=e.charAt(Math.floor(Math.random()*e.length));return i}function r(a){var e=encodeURIComponent(a.replace(/ /g,"+"));if(1!==I||e!==b){I=1,b=e;var i="https://api.spotify.com/v1/search?q="+e+"&type=artist&limit=50";$.ajax({url:i,headers:{Authorization:"Bearer "+p},success:function(a){o(a.artists.items,!1)}}),document.title='Search: "'+a+'" - '+g}}function o(a,e){$("#album-results").hide(),e||($("#artist-results").empty(),0===a.length&&$("#artist-results").html('<span class="no-res">(no results)</span>')),$("#artist-results").show();var i=$("<ul></ul>").appendTo($("#artist-results")),n=a.map(function(a){var e=[],i='<a href="#" class="artist-open-button touch-action" data-artist-id="'+a.id+'" data-artist-name="'+a.name+'">open</a>';return e.push(a.name),e.push("("+a.popularity+")"),"genres"in a&&a.genres.length>0&&e.push("{genres: "+a.genres.join(", ")+"}"),"<li>"+i+" "+e.join(" ")+"</li>"}).join("");i.html(n),$("a.artist-open-button").click(function(){return document.title=$(this).data("artist-name")+" - "+g,s($(this).data("artist-id")),!1})}function s(a){I=2,b=a,$("#artist-results").hide(),$("#album-results").empty().show(),l("https://api.spotify.com/v1/artists/"+encodeURIComponent(a)+"/albums?limit=25",M)}function l(a,e){e<=0?$("#album-results").append("<div><i>(remainder truncated)</i></div>"):$.ajax({url:a,headers:{Authorization:"Bearer "+p},success:function(a){var i=$("<ul></ul>").appendTo($("#album-results")),n=a.items.map(function(a){var e="<img src='"+a.images.slice(-1).pop().url+"' class='album-cover-art' width='32' height ='32' />",i=a.available_markets.map(function(a){var e=a.toUpperCase(),i=e in f?f[e]:e;return"<span class='famfamfam-flag-"+a.toLowerCase()+"' aria-label='"+i+"' title='"+i+"'></span>"}).join(" ");return"<li><div class='album-open-button touch-action' data-album-id='"+a.id+"'>"+e+a.name+"</div><div class='album-markets'>"+i+"</div></li>"}).join("");i.html(n),i.find("div.album-open-button").click(function(){return u("https://api.spotify.com/v1/albums/"+$(this).data("album-id")+"/tracks?limit=50"),!1}),null!==a.next&&l(a.next,e-1)}})}function u(a,e){void 0===e&&(e=""),$.ajax({url:a,headers:{Authorization:"Bearer "+p},success:function(a){var i=a.items.map(function(a){return a.track_number+". "+a.name+(a.explicit?" (E)":"")+"\n"}).join("");e+=i,null!==a.next?u(a.next,e):window.alert(e)}})}var d="spot_a",c="spot_b",m="spot_c",h=15e3,S=36,p=function(){var r=n();if(void 0!=r)return r;if(window.location.hash.length>0){var o=function(a){$(document).ready(function(){$("#main-content").hide().empty(),$("#failure-fallback").html(a)})},s=e(window.location.hash.substring(1));if(history.replaceState(null,"","#"),"access_token"in s){var l=window.sessionStorage.getItem(m);return window.sessionStorage.removeItem(m),null===l?void o("Request not issued with CSRF token"):"state"in s&&l===s.state?($(document).ready(function(){$("#failure-fallback").hide()}),i(s.access_token,parseInt(s.expires_in,10)),s.access_token):void o("CSRF token validation failed")}if("error"in s)return void o("API auth failed with error "+s.error)}var u=t(S);return window.sessionStorage.setItem(m,u),a(u)}(),f={GG:"Guernsey",SK:"Slovakia",TW:"Taiwan, Republic of China",AE:"United Arab Emirates",JM:"Jamaica",SG:"Singapore",KI:"Kiribati",MA:"Morocco",NZ:"New Zealand",HR:"Croatia",IO:"British Indian Ocean Territory",MG:"Madagascar",KM:"Comoros",MV:"Maldives",SJ:"Svalbard and Jan Mayen Islands",HU:"Hungary",PE:"Peru",PF:"French Polynesia",NE:"Niger",BB:"Barbados",PK:"Pakistan",AD:"Andorra",AR:"Argentina",VN:"Viet Nam",KZ:"Kazakhstan",LC:"Saint Lucia",HT:"Haiti",SH:"Saint Helena",WS:"Samoa",VA:"Holy See (Vatican City State)",PY:"Paraguay",EC:"Ecuador",BE:"Belgium",AM:"Armenia",MO:"Macao, Special Administrative Region of China",MW:"Malawi",AU:"Australia",GL:"Greenland",LT:"Lithuania",MF:"Saint-Martin (French part)",SS:"South Sudan",SN:"Senegal",RU:"Russian Federation",SI:"Slovenia",BT:"Bhutan",AI:"Anguilla",ER:"Eritrea",ST:"Sao Tome and Principe",ET:"Ethiopia",CY:"Cyprus",SZ:"Swaziland",JE:"Jersey",FR:"France",PL:"Poland",SC:"Seychelles",YT:"Mayotte",AF:"Afghanistan",AW:"Aruba",TL:"Timor-Leste",TR:"Turkey",SO:"Somalia",IM:"Isle of Man",ZA:"South Africa",IN:"India",TZ:"Tanzania *, United Republic of",NG:"Nigeria",GB:"United Kingdom",SM:"San Marino",IE:"Ireland",SB:"Solomon Islands",RW:"Rwanda",MN:"Mongolia",AN:"Netherlands Antilles",FJ:"Fiji",PS:"Palestinian Territory, Occupied",EH:"Western Sahara",BG:"Bulgaria",DJ:"Djibouti",DK:"Denmark",MM:"Myanmar",CR:"Costa Rica",VI:"Virgin Islands, US",BO:"Bolivia",PH:"Philippines",GF:"French Guiana",NU:"Niue",KR:"Korea, Republic of",JO:"Jordan",HK:"Hong Kong, Special Administrative Region of China",CF:"Central African Republic",SD:"Sudan",DO:"Dominican Republic",AT:"Austria",MY:"Malaysia",GD:"Grenada",UZ:"Uzbekistan",TG:"Togo",BL:"Saint-Barthélemy",ME:"Montenegro",LR:"Liberia",GW:"Guinea-Bissau",EG:"Egypt",VE:"Venezuela (Bolivarian Republic of)",CU:"Cuba",CI:"Côte d'Ivoire",SL:"Sierra Leone",YE:"Yemen",IS:"Iceland",BZ:"Belize",BY:"Belarus",CH:"Switzerland",KY:"Cayman Islands",FM:"Micronesia, Federated States of",VC:"Saint Vincent and Grenadines",UY:"Uruguay",BW:"Botswana",SV:"El Salvador",JP:"Japan",OM:"Oman",AQ:"Antarctica",CD:"Congo, Democratic Republic of the",SY:"Syrian Arab Republic (Syria)",MP:"Northern Mariana Islands",CL:"Chile",KH:"Cambodia",CZ:"Czech Republic",PN:"Pitcairn",GY:"Guyana",SA:"Saudi Arabia",HM:"Heard Island and Mcdonald Islands",DE:"Germany",BR:"Brazil",FK:"Falkland Islands (Malvinas)",TV:"Tuvalu",ZW:"Zimbabwe",LA:"Lao PDR",CA:"Canada",KW:"Kuwait",LU:"Luxembourg",NL:"Netherlands",BS:"Bahamas",SE:"Sweden",FI:"Finland",GS:"South Georgia and the South Sandwich Islands",AL:"Albania",CM:"Cameroon",MX:"Mexico",TM:"Turkmenistan",GE:"Georgia",ZM:"Zambia",LY:"Libya",TJ:"Tajikistan",BM:"Bermuda",GH:"Ghana",UA:"Ukraine",RO:"Romania",AS:"American Samoa",PT:"Portugal",US:"United States of America",GN:"Guinea",LS:"Lesotho",AG:"Antigua and Barbuda",LB:"Lebanon",BI:"Burundi",AZ:"Azerbaijan",GA:"Gabon",PW:"Palau",UM:"United States Minor Outlying Islands",LV:"Latvia",CV:"Cape Verde",MQ:"Martinique",QA:"Qatar",NC:"New Caledonia",PM:"Saint Pierre and Miquelon",CC:"Cocos (Keeling) Islands",BN:"Brunei Darussalam",IR:"Iran, Islamic Republic of",ID:"Indonesia",FO:"Faroe Islands",NO:"Norway",TF:"French Southern Territories",GR:"Greece",BF:"Burkina Faso",MR:"Mauritania",KP:"Korea, Democratic People's Republic of",MU:"Mauritius",MD:"Moldova",RE:"Réunion",DZ:"Algeria",LK:"Sri Lanka",HN:"Honduras",NR:"Nauru",NI:"Nicaragua",TT:"Trinidad and Tobago",BH:"Bahrain",KE:"Kenya",VU:"Vanuatu",IQ:"Iraq",TH:"Thailand",BV:"Bouvet Island",UG:"Uganda",EE:"Estonia",TD:"Chad",GU:"Guam",CX:"Christmas Island",MT:"Malta",TK:"Tokelau",CG:"Congo (Brazzaville)",AO:"Angola",TN:"Tunisia",GM:"Gambia",ES:"Spain",TO:"Tonga",MZ:"Mozambique",BA:"Bosnia and Herzegovina",RS:"Serbia",PA:"Panama",MH:"Marshall Islands",GI:"Gibraltar",KG:"Kyrgyzstan",LI:"Liechtenstein",IL:"Israel",DM:"Dominica",NP:"Nepal",ML:"Mali",NF:"Norfolk Island",PR:"Puerto Rico",CN:"China",MK:"Macedonia, Republic of",KN:"Saint Kitts and Nevis",MS:"Montserrat",MC:"Monaco",NA:"Namibia",IT:"Italy",GP:"Guadeloupe",BD:"Bangladesh",CK:"Cook Islands",AX:"Aland Islands",WF:"Wallis and Futuna Islands",BJ:"Benin",GQ:"Equatorial Guinea",VG:"British Virgin Islands",PG:"Papua New Guinea",SR:"Suriname *",TC:"Turks and Caicos Islands",CO:"Colombia",GT:"Guatemala"},M=4,g="Spotify region search",I=0,b="";$(document).ready(function(){function a(){var a=$("#artist-search-field").val().trim();return a&&r(a),!1}$("#artist-search-field").keyup(function(e){13===e.keyCode&&a()}),$("#artist-search-go").click(a),$("#artist-search-form").submit(a),$("#artist-search-form").focusout(a)})}();