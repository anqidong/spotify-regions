"use strict";!function(){function t(t){var i=t.replace(/ /g,"+");if("artistsSearch"!==u||i!==o){u="artistsSearch",o=i;var e="https://api.spotify.com/v1/search?q="+i+"&type=artist&limit=50";$.getJSON(e,function(t){a(t.artists.items,!1)}),document.title='Search: "'+t+'" - '+n}}function a(t,a){$("#album-results").hide(),a||($("#artist-results").empty(),0===t.length&&$("#artist-results").html('<span class="no-res">(no results)</span>')),$("#artist-results").show();var e=$("<ul></ul>").appendTo($("#artist-results")),s=t.map(function(t){var a=[],i='<a href="#" class="artist-open-button touch-action" data-artist-id="'+t.id+'" data-artist-name="'+t.name+'">open</a>';return a.push(t.name),a.push("("+t.popularity+")"),"genres"in t&&t.genres.length>0&&a.push("{genres: "+t.genres.join(", ")+"}"),"<li>"+i+" "+a.join(" ")+"</li>"}).join("");e.html(s),$("a.artist-open-button").click(function(){return document.title=$(this).data("artist-name")+" - "+n,i($(this).data("artist-id")),!1})}function i(t){u="artistView",o=t,$("#artist-results").hide(),$("#album-results").empty(),$("#album-results").show(),e("https://api.spotify.com/v1/artists/"+t+"/albums?limit=25",4)}function e(t,a){return a<=0?void $("#album-results").append("<div><i>(remainder truncated)</i></div>"):void $.getJSON(t,function(t){var i=$("<ul></ul>").appendTo($("#album-results")),n=t.items.map(function(t){var a=t.images.slice(-1).pop().url,i="<img src='"+a+"' class='album-cover-art' width='32' height ='32' />",e=t.available_markets.map(function(t){var a=t.toUpperCase(),i=a in r?r[a]:a;return"<i class='famfamfam-flag-"+t.toLowerCase()+"' aria-label='"+i+"' title='"+i+"'></i>"}).join(" "),s="<div class='album-open-button touch-action' data-album-id='"+t.id+"'>"+i+t.name+"</div>";return"<li>"+s+"<div class='album-markets'>"+e+"</div></li>"}).join("");i.html(n),i.find("div.album-open-button").click(function(){var t="https://api.spotify.com/v1/albums/"+$(this).data("album-id")+"/tracks?limit=50";return s(t),!1}),null!==t.next&&e(t.next,a-1)})}function s(t,a){void 0===a&&(a=""),$.getJSON(t,function(t){var i=t.items.map(function(t){return t.track_number+". "+t.name+(t.explicit?" (E)":"")+"\n"}).join("");a+=i,null!==t.next?s(t.next,a):window.alert(a)})}var n="Spotify region search",r={},u="blank",o="";$(function(){$.getJSON("country-codes.json",function(t){r=t})}),$(document).ready(function(a){var i=function(){var a=$("#artist-search-field").val().trim();return a&&t(a),!1};$("#artist-search-field").keyup(function(t){13===t.keyCode&&i()}),$("#artist-search-go").click(i),$("#artist-search-form").submit(i),$("#artist-search-form").focusout(i)})}();